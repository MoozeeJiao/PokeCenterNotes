# 随手杂记

## SDN

软件定义网络，看上去是网络设备太多、太分散、场景太复杂。在上面抽象出一个控制层统一编程管理。（控制转发分离，集中式控制，可编程，开放接口，虚拟化）


## TCP_NODELAY

Socket编程中用来控制是否开启Nagle算法（false时开启）。该算法要求一个TCP连接上最多只能有一个未被确认的小分组（小于Max Segemnt Size长度的分组），在该小分组的确认到来之前，不能发送其他小分组。目的是为了提高较慢的广域网传输效率，减小小分组的报文个数。*HTTP2默认开启？*


## Redis无盘复制

主节点rdb文件不落盘，直接发送给（socket）从节点。（磁盘性能差，网络性能好的情况）

```
rep-diskless-sync yes
# 开始复制后，主节点就无法接受其他从节点的复制请求了，该参数使逐渐点等待5秒，与更多的从节点同时开始复制
rep-diskless-sync-delay 5
```

## pod 亲和性和反亲和性

亲和性：哪些pod可以部署在同一个拓扑中；反亲和性：哪些pod不能部署在同一拓扑中。

## 云原生监控主要问题

* 汇合与动态（容器生命周期短）
* 性能（尽量不要在docker内部）
* 指标数量（变多一层）